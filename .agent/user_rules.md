# 사용자 규칙 (User Rules)

이 프로젝트에서 작업을 수행할 때 반드시 준수해야 하는 규칙입니다.

## 1. 배포 및 작업 마무리 (Deployment & Completion)
- **모든 작업의 최종 목표는 '실서비스 반영(Live Distribution)'입니다.** 단순히 코드를 짜는 것에서 멈추지 마십시오.
- 사용자가 "마무리" 혹은 "최신화"를 요청할 경우, 아래 **[최종 체크리스트]**를 전수 점검하여 보고해야 합니다:
    1.  **Git Push**: 모든 변경 사항을 원격 저장소(`main` 브랜치 등)에 전송했는가?
    2.  **Vercel Build**: Vercel 대시보드(혹은 로그)에서 빌드 및 배포가 '성공(Success)' 상태인가?
    3.  **도메인(Domain) 연동**: (필요시) 도메인 연결 설정에 이상이 없으며, 실제 URL로 접속했을 때 변경 사항이 보이는가?
    4.  **DB/API 동기화**: 프로젝트에 사용되는 Supabase DB 설정이나 Gemini API 키 등 외부 서비스와의 연결이 정상인가?
    5.  **실제 동작(Live Check)**: 배포 완료 후 실제 웹사이트 주소에 접속하여 수정된 기능이 의도대로 작동하는지 최종 확인했는가?
- 작업을 마칠 때 "어떤 것들이 실서비스에 적용되었는지"와 "현재 배포된 실제 URL"을 함께 명시하십시오.

## 2. 작업 절차 (Workflow)
- 코드 구현 → 유효성 검증(Build) → **Git 배포(Push)** → **배포 성공 확인(Vercel 등)** → **실사이트(Live) 동작 확인** → 최종 보고 순으로 진행합니다.
- 단순히 "코드 수정했습니다"가 아니라 "**~주소에 접속하시면 현재 적용된 내용을 확인하실 수 있습니다**"가 되어야 완전한 마무리입니다.

## 3. 유기적 시스템 동기화 원칙 (Organic System Sync) - [절대 수칙]
- **거짓 완료 금지**: '배포했습니다'라는 보고는 Vercel(라이브)과 Git(소스/액션)이 모두 동기화되었을 때만 사용한다. 하나만 배포하고 완료를 보고하는 행위는 시스템 불일치를 초래하는 '거짓 완료'이자 감독자(Manager)를 기만하는 행위로 간주한다.
- **유기체적 연결성 (Organism Logic)**: 이 프로젝트는 코드, Cron 스케줄러(GitHub Actions), 호스팅(Vercel), 데이터베이스(Supabase)가 하나로 얽힌 유기체다. 연쇄 작용을 무시한 '단일 파일 수정' 식의 접근을 금지한다.
- **동기화 강제 (Mandatory Full-Sync)**: 특히 크론 주기나 환경 설정 변경 시, Vercel 배포와 동시에 반드시 Git Push를 수행하여 모든 관제 시스템이 동일한 주석과 로직을 공유하게 한다.
- **종합 유효성 검사 (System-Wide Validation)**: 보고 전, 'Thinking' 프로세스를 통해 모든 유기적 연결망이 정상적으로 맞물렸는지 스스로 재현하고 검증한 증거(로그, 스크린샷 등)를 기반으로 보고한다.

## 4. 상호 의존성 관리 (Inter-dependency Management) - [실천 가이드]
- **영향 범위 전수 조사**: 특정 변수나 설정을 수정할 때, 그것이 미치는 파급 효과를 연쇄적으로 추적한다.
    - 예: **Cron 주기 변경 시** → 1) Vercel 서버 부하 확인, 2) Gemini API 호출 쿼터(Limit) 및 과금량 점검, 3) DB 저장 공간 및 처리량 확인, 4) 관리자 대시보드 로그 표시 부하 확인 등을 선행한다.
- **병목 지점 사전 차단**: 한 쪽을 강화(예: 발행량 증대)하려 할 때 다른 쪽에서 병목(예: API 429 에러, 서버 504 타임아웃)이 발생하지 않도록 밸런스를 맞추어 동시 수정한다.
- **전방위 동기화**: `post-generator.ts` (로직) - `cron.yml` (실행기) - `Settings.ts` (설정값) - `Gemini API` (리소스) - `Vercel/Git` (인프라) 간의 설정값이 단 1%의 불일치도 없도록 물리적/논리적으로 완벽하게 동기화한 후 배포한다.

## 5. 장애 내성 및 다중 시도 원칙 (Resilient Multi-Attempt) - [지능형 대응]
- **포기 금지**: 단순히 "안 됩니다"라고 보고하지 않는다. 시스템적 오류(네트워크, API 제한 등) 발생 시, 최소 3~5회 이상의 지능적 재시도(Exponential Backoff 등)를 자동화 로드맵에 포함한다.
- **Thinking 기반 원인 분석**: 실패 시 "왜" 실패했는지 Thinking을 통해 근본 원인(Root Cause)을 추적한다. (예: 401 에러면 토큰 불일치, 429면 쿼터 초과)
- **우회 전략 수립**: 주 접근법이 실패하면 즉시 대안(Fallback)을 가동한다. (예: Gemini 2.0 실패 시 1.5로 즉시 전환 및 재시도)
- **동적 자가 치유**: 설정을 바꾼 후에는 시스템이 제대로 맞물렸는지(Organic Sync) 실제 로그를 통해 1회 이상 '성공'을 확인한 뒤에만 최종 완료를 선언한다.
